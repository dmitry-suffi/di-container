Определение
===========

**Class suffi\di\Definition**

Класс-определение. Содержит определения зависимостей класса и механику создания нового экземпляра.

### Основные методы:

* ___construct(Container $container, string $name, string $className)_ - Конструктор. Параметы - Контейнер, Имя, Имя класса.

* _parameter(string $paramName, $paramValue)_ - Добавление параметра для конструктора (зависимость через конструктор). Если конструктор требует объект и передана строка, то будет искаться(создаваться) объект по данной строке в контейнере.

* _property(string $paramName, $paramValue)_ - Добавление свойства (Зависимость через свойство). Если должен быть объект, то он должен быть задан явно.

* _setter(string $paramName, $paramValue)_ - Добавление сеттера (Зависимость через метод). Имя метода строится из имени параметра (например, setFoo() для параметра foo ). Если метод требует объект и передана строка, то будет искаться(создаваться) объект по данной строке в контейнере.

* _init(string $methodName)_ - Добавление метода инициализации. Метод будет вызван после создания объекта и установки всех свойств и сеттеров.

* _factory(string $factory)_ - Добавление фабричного метода создания объекта. Метод должен быть статическим, принадлежать создаваемому классу и возвращать объект этого класса.

* _make()_ - Создает объект и разрешает зависимости.

### Примечания.

* Методы сеттеров и инициализации должны быть публичными.

* Если зависимость имеет тип объекта, то можно передать ключ, по которому объект будет искаться в контейнере. Только для зависимостей через конструктор или сеттер. Не работает для свойств, так как в php нельзя явно указать тип свойства.

### Пример
```php

$container = $this->getContainer();

$def = new Definition($container, 'foo', Foo::class);

$foo = $def->factory('createFromFoo')
           ->parameter('foo', 'foo')
           ->property('bar', 'bar')
           ->setter('thy', 'thy')
           ->init('initMethod')
           ->make();
```